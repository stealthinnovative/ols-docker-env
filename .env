# ==============================================================================
# WP-STACK: RYZEN 7900X / 4GB RAM / NVME
# ==============================================================================
TIMEZONE=Pacific/Honolulu
DOMAIN=yourdomain.com
EMAIL=admin@yourdomain.com

# --- Database Security ---
MYSQL_ROOT_PASSWORD=complex_root_password
MYSQL_DATABASE=wordpress
MYSQL_USER=wp_user
MYSQL_PASSWORD=complex_app_password

# ==============================================================================
# PERFORMANCE TUNING (Scalability Guide)
# ==============================================================================

# --- Host Memory & Zswap ---
# 2GB: 25% | 4GB: 38% | 8GB: 45% (Higher % on Ryzen leverages CPU compression)
ZSWAP_MAX_PERCENT=38
# 2GB: 1G  | 4GB: 2G  | 8GB: 4G
HOST_SWAP_SIZE=2G

# --- Swappiness (Active Zswap Strategy) ---
# Keep DB/Redis in RAM. Default 60 is too aggressive for NVMe.
DB_SWAPPINESS=1
OLS_SWAPPINESS=10
REDIS_SWAPPINESS=0

# --- Container Resource Jails (Docker Limits) ---
# 2GB: 1g   | 4GB: 2g   | 8GB: 5g
OLS_MEM_LIMIT=2g
# 2GB: 1.5g | 4GB: 3.5g | 8GB: 10g
OLS_TOTAL_LIMIT=3.5g
# 2GB: 512m | 4GB: 1.2g | 8GB: 2g
DB_MEM_LIMIT=1.2g

# --- MariaDB Performance ---
# 2GB: 128M | 4GB: 512M | 8GB: 1G
DB_BUFFER_POOL=512M
# 2GB: 100  | 4GB: 151  | 8GB: 300+
MARIADB_MAX_CONNS=151
DB_LOG_FILE=128M
DB_FLUSH_COMMIT=2

# --- OpenLiteSpeed & PHP Workers (Ryzen 7900X Optimized) ---
# 2GB: 8    | 4GB: 24   | 8GB: 48+ (Match PHP_WORKERS to CPU threads)
PHP_WORKERS=24
PHP_LSAPI_CHILDREN=24
OLS_WORKERS=1
CPU_AFFINITY=1

# --- PHP Application Limits ---
PHP_MEMORY_LIMIT=256M
PHP_MAX_EXECUTION_TIME=60
PHP_UPLOAD_MAX_FILESIZE=512M
PHP_POST_MAX_SIZE=512M

# --- Redis Performance (Socket Mode) ---
REDIS_MAX_MEMORY=128mb
REDIS_MEM_LIMIT=300M
REDIS_COMMAND="--port 0 --unixsocket /var/run/redis/redis.sock --unixsocketperm 777 --maxmemory 128mb --maxmemory-policy allkeys-lru"

# ==============================================================================
# POST-INSTALL SETUP GUIDE
# ==============================================================================
# 1. RUN HOST OPTIMIZER: sudo ./bin/zswap-enable
# 2. WP REDIS CONFIG: Host: /var/run/redis/redis.sock | Port: 0
# 3. MULTI-SITE: Use unique "Global Key Prefix" (e.g. site1_) in LSCache settings.
# ==============================================================================