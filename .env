# ==============================================================================
# WP-STACK: RYZEN 7900X / 4GB RAM / NVME (MULTI-SITE READY)
# ==============================================================================
TIMEZONE=Pacific/Honolulu
DOMAIN=yourdomain.com
EMAIL=admin@yourdomain.com

# --- Database Security ---
# Note: Use standard TCP (mysql:3306) for easy multi-site scaling.
MYSQL_ROOT_PASSWORD=complex_root_password
MYSQL_DATABASE=wordpress
MYSQL_USER=wp_user
MYSQL_PASSWORD=complex_app_password

# --- Host Resources (Zswap) ---
# 38% of 4GB = ~1.5GB compressed pool for Ryzen to manage spills.
ZSWAP_MAX_PERCENT=38
HOST_SWAP_SIZE=2G

# --- Swappiness (Ryzen Optimized) ---
# Default is 60. We lower these to keep 'hot' data in physical RAM.
DB_SWAPPINESS=1
OLS_SWAPPINESS=10
REDIS_SWAPPINESS=0

# --- OLS & PHP (12-Core/24-Thread Optimization) ---
# 24 workers allow the 7900X to saturate all threads during LSCache crawls.
PHP_WORKERS=24
PHP_LSAPI_CHILDREN=24
OLS_MEM_LIMIT=2g
OLS_TOTAL_LIMIT=3.5g

# --- MariaDB (11.x LTS) ---
# 512M pool is perfect for a 4GB system with a 50MB-500MB database.
DB_BUFFER_POOL=512M
DB_LOG_FILE=128M
DB_FLUSH_COMMIT=2
MARIADB_MAX_CONNS=151
DB_MEM_LIMIT=1.2g

# --- Redis Performance (Unix Socket Mode) ---
REDIS_MAX_MEMORY=128mb
REDIS_MEM_LIMIT=300M

# OPTION A: High-Performance Socket (Enabled)
REDIS_COMMAND="--port 0 --unixsocket /var/run/redis/redis.sock --unixsocketperm 777 --maxmemory ${REDIS_MAX_MEMORY} --maxmemory-policy allkeys-lru"

# OPTION B: Standard TCP (Commented out)
# REDIS_COMMAND="--port 6379 --maxmemory ${REDIS_MAX_MEMORY} --maxmemory-policy allkeys-lru"

# ==============================================================================
# LSCACHE REDIS SETUP GUIDE (PER SITE)
# ==============================================================================
# 1. Open WordPress Admin > LiteSpeed Cache > Cache > [6] Object
# 2. Object Cache: ON
# 3. Method: Redis
# 4. Host: /var/run/redis/redis.sock
# 5. Port: 0 (Required for Socket Mode)
# 6. Database ID: 0 (Leave as 0 for all sites)
# 7. Global Key Prefix: [domain_name]_ (MUST be unique per site, e.g., site1_)
# ==============================================================================