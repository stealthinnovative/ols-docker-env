;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
; RYZEN 7900X OPTIMIZED PHP.INI (PHP 8.5+ & DOCKER)
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

[PHP]
; --- Resource Limits ---
; We set these high for the benchmark. You can lower 300 to 60 later.
memory_limit = 512M
max_memory_limit = 512M
max_execution_time = 60
max_input_time = 60
max_input_vars = 3000

; --- File Uploads ---
; Optimized for NVMe speeds
upload_max_filesize = 128M
post_max_size = 128M
file_uploads = On

; --- Error Handling ---
display_errors = Off
log_errors = On
fatal_error_backtraces = On

[opcache]
; --- Base OPcache Settings ---
opcache.enable = 1
opcache.enable_cli = 1
opcache.memory_consumption = 256
opcache.interned_strings_buffer = 64
opcache.max_accelerated_files = 20000
opcache.revalidate_freq = 0
opcache.validate_timestamps = 1
opcache.fast_shutdown = 1

; --- 2026 JIT Optimized Settings ---
; 1255 = Tracing JIT, optimized for CPU-heavy WordPress tasks
opcache.jit = 1255
opcache.jit_buffer_size = 128M

; --- Aggressive Trigger (High-Speed Mode) ---
; Lowered to 15 to force JIT compilation faster on the 7900X
opcache.jit_hot_func = 15
opcache.jit_hot_loop = 15

[mysqlnd]
; Performance tuning for the database connection
mysqlnd.collect_statistics = Off
mysqlnd.collect_memory_statistics = Off